<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="keywords" content="nfsnfs3nfsv3nfsv4.1exportsmountclusterenable_nfsdisable_nfsfloating_ip,  ">
<title>Enabling and Using NFSv4.1 on a Qumulo Cluster | Qumulo Documentation</title>
<link rel="stylesheet" href="css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="css/customstyles.css">
<link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
<link rel="stylesheet" href="css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="194x194" href="images/favicon-194x194.png">
<link rel="icon" type="image/png" sizes="192x192" href="images/android-chrome-192x192.png">
<link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
<link rel="manifest" href="images/site.webmanifest">
<link rel="mask-icon" href="images/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="images/favicon.ico">
<meta name="apple-mobile-web-app-title" content="Qumulo Documentation">
<meta name="application-name" content="Qumulo Documentation">
<meta name="msapplication-TileColor" content="#2b5797">
<meta name="msapplication-TileImage" content="images/mstile-144x144.png">
<meta name="msapplication-config" content="images/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="docs" href="http://10.116.10.222:4000/feed.xml">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-81J7N4LMSE"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-81J7N4LMSE');
</script>

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- -------------------- TOPNAV START -------------------- -->
<div class="above-header"></div>

<div class="header-container">
<header class="header">
  <div class="logo">
    <a class="header-link" href="https://care.qumulo.com/hc/en-us">
      <img src="images/qumulo-logo.png" alt="Qumulo Logo">
    </a>
  </div>

  <div class="carelinks">
    <div class="cloac">
      <a class="header-link header-left" href="https://care.qumulo.com/hc/en-us/requests/new">OPEN A CASE</a>
    </div>
    <div class="clkb">
      <a class="header-link header-left" href="https://care.qumulo.com/hc/en-us/categories/115000637447-KNOWLEDGE-BASE">KNOWLEDGE BASE</a>
    </div>
    <div class="clc">
      <a class="header-link header-left" href="https://care.qumulo.com/hc/en-us/community/topics">COMMUNITY</a>
    </div>
    <div class="clqt">
      <a class="header-link header-left" href="https://trends.qumulo.com/" target="_blank">QUMULO TRENDS</a>
    </div>
  </div>

  <div class="nav-wrapper">
    <span class="icon-menu"></span>
    <nav class="user-nav" id="user-nav">
      <div class="qf2header">
        <a class="header-link header-right" href="https://qumulo.com/product/" target="_blank">Products</a>
        <a class="header-link header-right" href="https://qumulo.com/solution/" target="_blank">Industries</a>
        <a class="header-link header-right" href="https://qumulo.com/partners/" target="_blank">Partners</a>
        <a class="header-link header-right" href="https://qumulo.com/company/" target="_blank">Company</a>
        <a class="header-link header-right" href="https://qumulo.com/library/" target="_blank">Resources</a>
      </div>
    </nav>
</div>
</header>
</div>
<div class="below-header navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Qumulo Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Reading Mode</a></li>
                <!-- entries without drop-downs appear here -->




                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Enabling and Using NFSv4.1 on a Qumulo Cluster">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
    </div>
        <!-- /.container -->
</div>
<!-- -------------------- TOPNAV END -------------------- -->

<!-- Page Content -->

<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        

            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  
  <a target="_blank" rel="noopener" href="https://github.com/qumulo/docs/blob/gh-pages/nfsv4.1-enabling-using.md" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit on GitHub</a>
  
  
  <li class="sidebarTitle"> </li>
  
  
  
      
  
  <li>
      <a title="Qumulo Administrator Guide" href="#">Qumulo Administrator Guide</a>
      <ul>
          
          
          
          <li><a title="Documentation Home" href="index.html">Documentation Home</a></li>
          
          
          
          
          
          
          <li><a title="Administrator Guide Home" href="administrator-guide.html">Administrator Guide Home</a></li>
          
          
          
          
          
          
          <li><a title="Administrator Guide Document History" href="administrator-guide-document-history.html">Administrator Guide Document History</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Configuring Your Node's Networking" href="#">Configuring Your Node's Networking</a>
      <ul>
          
          
          
          <li><a title="Identifying NICs and Choosing Transceivers and Cables for Your Qumulo Node" href="nics-transceivers-cables.html">Identifying NICs and Choosing Transceivers and Cables for Your Qumulo Node</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Maintaining Your Node's Hardware" href="#">Maintaining Your Node's Hardware</a>
      <ul>
          
          
          
          <li><a title="Replacing the Chassis of C-192T and C-432T Nodes" href="c-192t-c-432t-chassis-replacement.html">Replacing the Chassis of C-192T and C-432T Nodes</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Working with File System Protocols" href="#">Working with File System Protocols</a>
      <ul>
          
          
          
          <li class="active"><a title="Enabling and Using NFSv4.1 on a Qumulo Cluster" href="nfsv4.1-enabling-using.html">Enabling and Using NFSv4.1 on a Qumulo Cluster</a></li>
          
          
          
          
          
          
          <li><a title="Managing File Access Permissions Using NFSv4.1 Access Control Lists (ACLs)" href="nfsv4.1-auth-sys-acls.html">Managing File Access Permissions Using NFSv4.1 Access Control Lists (ACLs)</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Moving Files to and From Amazon S3" href="#">Moving Files to and From Amazon S3</a>
      <ul>
          
          
          
          <li><a title="Using Qumulo Shift-To to Copy Objects to Amazon S3" href="shift-to-s3.html">Using Qumulo Shift-To to Copy Objects to Amazon S3</a></li>
          
          
          
          
          
          
          <li><a title="Using Qumulo Shift-From for Amazon S3 to Copy Objects" href="shift-from-s3.html">Using Qumulo Shift-From for Amazon S3 to Copy Objects</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">Enabling and Using NFSv4.1 on a Qumulo Cluster</h1>
</div>



<div class="post-content">

   

    
    <!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>

    

   <p>Qumulo Core 4.3.0 (and higher) supports Network File System version 4.1 (NFSv4.1). This section explains how you can configure your cluster for a supported export configuration and enable or disable NFSv4.1 on your cluster. It also provides detail about supported and unsupported features. For more information about NFSv4.1 and file access permissions, see <a href="/docs/nfsv4.1-auth-sys-acls.html">Managing File Access Permissions Using NFSv4.1 Access Control Lists (ACLs)</a>.</p>

<div class="alert alert-warning" role="alert"><i class="fa fa-warning"></i> <b>Important</b><br /> Currently, Qumulo Core supports only NFSv4.1. Mounting with version 4.0 or 4.2 isn’t supported.</div>

<h2 id="configuring-and-using-exports-for-nfsv41">Configuring and Using Exports for NFSv4.1</h2>
<p>Qumulo’s NFS exports can present a view of your cluster over NFS that might differ from the contents of the underlying file system. You can mark NFS exports as read-only, restricted (to allow access only from certain IP adresses), or configure specific user mappings. For more information, see <a href="https://care.qumulo.com/hc/en-us/articles/360000723928-Create-an-NFS-Export">Create an NFS Export</a> in Qumulo Care.</p>

<p>While NFSv3 and NFSv4.1 share each cluster’s NFS export configuration, exports behave differently when you access them using NFSv4.1. This section explains these differences and the new requirements for export configurations with NFSv4.1.</p>

<h3 id="differences-between-nfsv3-and-nfsv41-exports">Differences Between NFSv3 and NFSv4.1 Exports</h3>
<p>In the following example, a Qumulo cluster has the following export configuration.</p>

<table>
  <thead>
    <tr>
      <th>Export Name</th>
      <th>File System Path</th>
      <th>Read-Only</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">/home</code></td>
      <td><code class="language-plaintext highlighter-rouge">/home</code></td>
      <td>No</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">/files</code></td>
      <td><code class="language-plaintext highlighter-rouge">/home/admin/files</code></td>
      <td>No</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">/read_only/home</code></td>
      <td><code class="language-plaintext highlighter-rouge">/home</code></td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">/read_only/files</code></td>
      <td><code class="language-plaintext highlighter-rouge">/home/admin/files</code></td>
      <td>Yes</td>
    </tr>
  </tbody>
</table>

<p>NFSv3 lets you mount one of these exports by specifying the full export name, for example:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mount <span class="nt">-onfsvers</span><span class="o">=</span>3 cluster.qumulo.com:/read_only/home /mnt/cluster/home
</code></pre></div></div>

<p>This command gives read-only access to the <code class="language-plaintext highlighter-rouge">/home</code> directory on the cluster using the path <code class="language-plaintext highlighter-rouge">/mnt/cluster/home</code>. However, the following command fails with the <code class="language-plaintext highlighter-rouge">No such file or directory</code> message.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mount <span class="nt">-onfsvers</span><span class="o">=</span>3 cluster.qumulo.com:/read_only /mnt/cluster/read_only
</code></pre></div></div>

<p>NFSv4.1 still lets you mount exports by specifying the full export name. However, NFSv4.1 also supports navigating <em>above</em> exports, as if they are part of the file system. The following command succeeds.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mount <span class="nt">-onfsvers</span><span class="o">=</span>4.1 cluster.qumulo.com:/read_only /mnt/cluster/read_only
</code></pre></div></div>

<p>At the mount, the exports under <code class="language-plaintext highlighter-rouge">/read_only</code> are visible: <code class="language-plaintext highlighter-rouge">/mnt/cluster/read_only</code> displays virtual directories named <code class="language-plaintext highlighter-rouge">files/</code> and <code class="language-plaintext highlighter-rouge">home/</code> with the contents of the corresponding directories in the file system, for example:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/mnt/cluster/read_only/
|--- files/&lt;file system contents&gt;
|--- home/
|------ admin/files/&lt;file system contents&gt;
|------ &lt;other file system contents&gt;
</code></pre></div></div>

<p>This presentation of exports lets you view existing exports using the file system’s own interface. It also lets you view new exports as soon as someone creates or modifies them without remounting.</p>

<h3 id="preparing-export-configurations-for-nfsv41">Preparing Export Configurations for NFSv4.1</h3>
<p>Qumulo’s implementation of NFSv4.1 distinguishes between navigating <em>above</em> exports and <em>inside</em> an export. To avoid confusion between paths that refer to a virtual directory above an export or a real file system directory inside an export, no export name can be a prefix of another export name when NFSv4.1 is enabled.</p>

<p>In the following example, a Qumulo cluster has the following export configuration.</p>

<table>
  <thead>
    <tr>
      <th>Export Name</th>
      <th>File System Path</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">/</code></td>
      <td><code class="language-plaintext highlighter-rouge">/</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">/admin</code></td>
      <td><code class="language-plaintext highlighter-rouge">/home/admin</code></td>
    </tr>
  </tbody>
</table>

<p>Because <code class="language-plaintext highlighter-rouge">/</code> is a prefix of <code class="language-plaintext highlighter-rouge">/admin</code>, you can’t enable NFSv4.1 with this export configuration. This restriction prevents the situation where the path <code class="language-plaintext highlighter-rouge">/admin</code> can refer to both the export of <code class="language-plaintext highlighter-rouge">/home/admin</code> or the actual file system path <code class="language-plaintext highlighter-rouge">/admin</code>.</p>

<p>To prepare this configuration for NFSv4.1, you can do one of the following:</p>
<ul>
  <li>Delete the <code class="language-plaintext highlighter-rouge">/</code> export and use NFSv4.1 presentation of exports when mounting <code class="language-plaintext highlighter-rouge">/</code>.</li>
  <li>Delete the <code class="language-plaintext highlighter-rouge">/admin</code> export.</li>
  <li>Give the <code class="language-plaintext highlighter-rouge">/</code> export a name that doesn’t use other exports as a prefix, for example:</li>
</ul>

<table>
  <thead>
    <tr>
      <th>Export Name</th>
      <th>File System Path</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">/root</code></td>
      <td><code class="language-plaintext highlighter-rouge">/</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">/admin</code></td>
      <td><code class="language-plaintext highlighter-rouge">/home/admin</code></td>
    </tr>
  </tbody>
</table>

<h3 id="visibility-of-ip-restricted-exports">Visibility of IP-Restricted Exports</h3>
<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note</b><br /> The names of exports are public to all NFSv4.1 clients, regardless of IP restrictions. You can’t disable this behavior.</div>

<p>NFSv4.1 respects IP restrictions on exports: only clients with allowed IP addresses can access the contents of an export. However, clients without access to an export can still view the export as a directory when they traverse <em>above</em> exports. The restrictions apply only when a client attempts to access the contents of the export.</p>

<h3 id="32-bit-sanitization">32-Bit Sanitization</h3>
<ul>
  <li>In NFSv3, you can configure specific exports to return 32-bit sanitized data for individual fields. NFSv3 converts any data larger than 32 bits in configured fields to 32-bit data and returns the data. For example, it can sanitize file size to 32-bit format. This truncates the field to <code class="language-plaintext highlighter-rouge">max_uint32</code> whenever the NFSv3 server returns the attribute.</li>
  <li>NFSv4.1 doesn’t support 32-bit sanitization and ignores any sanitizations configured for an export.</li>
</ul>

<h2 id="using-unique-hostnames-for-nfs-clients">Using Unique Hostnames for NFS Clients</h2>
<p>The NFSv4.1 protocol requires clients to provide the server with globally unique identifiers. However, the NFSv4.1 client for Linux uses the machine’s hostname by default. Because the Linux client doesn’t support using the same hostname to connect to an NFSv4.1 server, an unpredictable failure can occur. We recommend configuring all NFS clients to use unique hostnames. For more information, see <a href="https://www.kernel.org/doc/html/latest/admin-guide/nfs/nfs-client.html">NFS Client</a> in the Linux Kernel User’s and Administrator’s Guide.</p>

<h2 id="enabling-nfsv41-on-a-qumulo-cluster">Enabling NFSv4.1 on a Qumulo Cluster</h2>
<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note</b><br /> Currently, you can enable NFSv4.1 only using the CLI.</div>

<p>You can enable NFSv4.1 on your Qumulo cluster using a single cluster-wide configuration command, for example:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>qq nfs_modify_settings <span class="nt">--enable-v4</span>
</code></pre></div></div>

<p>When you enable NFSv4.1, all NFS exports are accessible using NFSv3 and NFSv4.1.</p>

<h2 id="specifying-the-nfs-mount-option">Specifying the NFS Mount Option</h2>
<p>Typically, NFS clients find and use the highest version of the protocol that both the client and server support. For example, the following command mounts using NFSv4.1 (if it is enabled) and using NFSv3 otherwise:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mount <span class="nt">-t</span> nfs your.qumulo.cluster:/mount_path /path/to/mountpoint
</code></pre></div></div>

<p>Because Qumulo’s NFSv4.1 implementation currently doesn’t have full feature parity with NFSv3, you must provide the <code class="language-plaintext highlighter-rouge">nfsvers=3</code> option for any mounts that require features (such as snapshot access) that only NFSv3 supports, for example:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mount <span class="nt">-t</span> nfs <span class="nt">-o</span> <span class="nv">nfsvers</span><span class="o">=</span>3 your.qumulo.cluster:/mount_path /path/to/mountpoint
</code></pre></div></div>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note</b><br /> We recommend specifying the <code class="language-plaintext highlighter-rouge">nfsvers=4</code> or <code class="language-plaintext highlighter-rouge">nfsvers=4.1</code> option for any mounts that use NFSv4.1.</div>

<h2 id="checking-whether-nfsv41-is-enabled">Checking Whether NFSv4.1 is enabled</h2>
<p>To check whether NFSv4.1 is enabled on your cluster, use the following CLI command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>qq nfs_get_settings
</code></pre></div></div>

<h2 id="disabling-nfsv41-on-a-qumulo-cluster">Disabling NFSv4.1 on a Qumulo Cluster</h2>
<div class="alert alert-warning" role="alert"><i class="fa fa-warning"></i> <b>Important</b><br /> Disabling NFSv4.1 makes any NFSv4.1 mounts unusable immediately. We recommend switching any NFSv4.1 mounts to NFSv3 before disabling NFSv4.1.</div>

<p>To disable NFSv4.1 on an entire Qumulo cluster, use the following CLI command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>qq nfs_modify_settings <span class="nt">--disable-v4</span>
</code></pre></div></div>

<h2 id="configuring-floating-ips-for-nodes">Configuring Floating IPs for Nodes</h2>
<p>Currently, each Qumulo node is limited to 1,000 clients connected using NFSv4.1 simultaneously. To account for nodes going down, we recommend balancing the number of client connections across your nodes by configuring a sufficient number of floating IP addresses per node. This prevents a node failover event from overloading the nodes to which the clients might fail over.</p>

<p>For example, if you configure only one IP address per node, on a cluster with 600 clients per node a single node failure might overload one of the remaining nodes, preventing 200 clients from connecting. If you assign multiple floating IP addresses to each node, the clients’ connections are distributed across multiple nodes.</p>

<h2 id="supported-and-unsupported-features-in-qumulos-implementation-of-nfsv41">Supported and Unsupported Features in Qumulo’s Implementation of NFSv4.1</h2>
<p>Qumulo’s implementation of NFSv4.1 currently supports:</p>
<ul>
  <li>General file system access (reading, writing, and navigating files)</li>
  <li>Unstable writes</li>
  <li>Full use of the NFS exports configuration shared with NFSv3</li>
  <li>Navigation in the pseudo-file system above your exports</li>
  <li>NFSv3-style <code class="language-plaintext highlighter-rouge">AUTH_SYS</code> or <code class="language-plaintext highlighter-rouge">AUTH_UNIX</code> authentication</li>
  <li>Fine-grained control over file permissions using access control lists (ACLs)</li>
</ul>

<p>Qumulo Core doesn’t support the following NFSv3 features through NFSv4.1:</p>
<ul>
  <li>Quota sizes don’t appear through NFSv4.1 with certain commands, such as <code class="language-plaintext highlighter-rouge">df</code> (however, Qumulo Core respects directory quotas)</li>
  <li>You can’t access snapshots through NFSv4.1</li>
  <li>File locking (for example, using the <code class="language-plaintext highlighter-rouge">fcntl</code> command)</li>
</ul>

<p>Qumulo Core doesn’t currently support the following NFSv4.1 features:</p>
<ul>
  <li>Secure authentication using Kerberos</li>
  <li>Delegations</li>
</ul>


    <!--
    <div class="tags">
        
        <b>Tags: </b>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    </div>
    -->




</div>

        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

<footer>
    <div class="footer">
        <div class="footer-text">
               Copyright &copy; 2021 Qumulo, Inc.<br />
 Site generated on Dec 9, 2021 <br />
<p><img width="93" height="43" id="logo" data-height-percentage="40" data-src="images/qumulo-logo.svg" src="images/qumulo-logo.svg" alt="Qumulo Logo" data-actual-width="1010" data-actual-height="312"/></p>
        </div>
        <div class="footer-grumpquats">
            <img src="images/grumpquats.png" style="max-width:220px;">
        </div>
    </div>
</footer>


</body>

</html>
